\documentclass[conference,10pt]{IEEEtran}
\usepackage{flushend}
\usepackage{lastpage}
\usepackage[utf8]{inputenc}
\usepackage{mathptmx}
\usepackage[dvipsnames]{xcolor}
\usepackage[T1]{fontenc}
\usepackage[english]{babel}
\usepackage{array}
\usepackage{url}
\usepackage{hyperref}
\usepackage[caption=false]{subfig}
\usepackage{microtype}
\usepackage{graphicx}
\usepackage[binary-units,per-mode=symbol]{siunitx}
\usepackage{cite}

\def\UrlBreaks{\do\/\do-}

\hypersetup{
  colorlinks=true,% Color URLs with urlcolor
  linkcolor=black,% The color for internal (cross-reference) links
  urlcolor=black,% The color for URLs (hyperlinks)
  citecolor=black,
  pdftitle={Social Distancing and the Internet: What Can Network Performance Measurements Tell Us?}
}

\urlstyle{same}

% TODO
% - http://www.oecd.org/coronavirus/policy-responses/keeping-the-internet-up-and-running-in-times-of-crisis-4017c4c9/


\begin{document}
\title{Social Distancing and the Internet: What Can Network Performance Measurements Tell Us?}

\author{
    \IEEEauthorblockN{
        Jessica Moreira\IEEEauthorrefmark{1},
        Amey Praveen Pasarkar\IEEEauthorrefmark{2},
        Wenjun Chen\IEEEauthorrefmark{2},
        Kerry Hu\IEEEauthorrefmark{2},
        Jan Janak\IEEEauthorrefmark{3},
        Henning Schulzrinne\IEEEauthorrefmark{3}
    }
    \IEEEauthorblockA{
        \IEEEauthorrefmark{1}Barnard College, New York, USA
    }
    \IEEEauthorblockA{
        \IEEEauthorrefmark{2}Fu Foundation School of Engineering and Applied Science, Columbia University, New York, USA
    }
    \IEEEauthorblockA{
        \IEEEauthorrefmark{3}Department of Computer Science, Columbia University, New York, USA
    }
    Email:
    jdm2240@barnard.edu,
    \{%
      \href{mailto:app2149@columbia.edu}{app2149},%
      \href{mailto:wc2741@columbia.edu}{wc2741},%
      \href{mailto:wh2453@columbia.edu}{wh2453}%
    \}@columbia.edu,
    \{%
      \href{mailto:janakj@cs.columbia.edu}{janakj},%
      \href{mailto:hgs@cs.columbia.edu}{hgs}%
    \}@cs.columbia.edu
}

\maketitle

\begin{abstract}
The COVID-19 outbreak has changed the way that people interact. With the new stay-at-home and social distancing orders, most activities that people were used to changed drastically, e.g., going to work and classes, living on campuses and traveling. In this new social environment, since early March people in the US were required to quarantine and do all their activities from home. Thus, in this project we researched how COVID-19 impacted internet usage in the US. While analyzing the fixed broadband raw data sets collected by the Federal Communications Commission (FCC), we were able to identify how aspects of internet usage such as amounts of data downloaded and uploaded by users and the average download and upload speed changed due to COVID-19. Moreover, through this analysis, we could also learn about how people have changed their behaviors while using the internet during COVID-19.
\end{abstract}

\section{Introduction}
\label{sec:introduction}

Much has been written about whether the residential internet infrastructure in the United States can cope with the sudden conversion of work into telework, school into distance learning and movies into Netflix binging, albeit usually based on data of dubious quality. But network measurements may also tell us about the effort and success of social distancing, the ability of different communities to move to internet-mediated modes of interaction and their sustainability.

We attempt to address both questions in this paper. First, we describe some of the sampling bias limitations of classical user-initiated network speed measurements in estimating how well infrastructure holds up during shifts in usage. For example, seeming reductions in speed may be caused by increased Wi-Fi interference or simply by increased usage by people who have lower internet speeds, whether by deliberate choice, availability or affordability.

We then draw on the FCC Measuring Broadband America (MBA) raw data, available longitudinally since 2011, to estimate the impact of increased internet usage on a variety of performance metrics, including throughput, latency and packet loss, disaggregating by coarse-grained geography and technology. Even though it usually does not draw much attention, we are particularly interested in upstream performance, as much more intense use of video conferencing tools has been shown to increase upstream bandwidth usage by 10-40\%.

At least as important as measuring the impact of COVID-19 on internet performance is using indirect metrics, such as internet usage, to estimate the success of social distancing measures, while maintaining user privacy. We draw on two metrics to explore whether we can detect the daytime and evening usage of residential internet users, indicating home schooling and work from home, as well as observance of stay-at-home orders on weekends. MBA suspends throughput measurements during periods of significant usage, such as video conferencing, and also tabulates total use. Thus, we might be able to deduce when households are actively using their broadband connection and whether such usage reflects, for example, the earlier restrictions imposed in Washington State or in the New York City metro area.

The measurement data has known limitations. For example, it only covers the largest ISPs and omits fixed wireless and satellite providers, the latter by their choice. We describe how more systematic data gathering during both short-termer natural disasters and long-term epidemics could supplement our understanding of how households deal with such crises, providing information to policy makers in near real-time and in a privacy-respecting manner.

% Due to government imposed lockdowns, a large percentage of the population had to depend in residential broadband Internet connection for work, entertainment, education, and social activities.

In early March, the US was hit by the COVID-19 outbreak. In order to control the spread of the virus and flatten the infection curve, states throughout the country implemented stay-at-home orders which forced people to quarantine. Thus, as people started quarantining at home, many started executing their daily activities, e.g., having social gatherings from home in an online environment.

Thus, considering this new format of social interaction caused by COVID-19, this study aims to understand how this virus has impacted Internet usage in the United States. It identifies the changes in Internet usage caused by the COVID-19 outbreak, e.g., change in the average downloaded and uploaded data consumption, in the average download and upload speed, in the peak periods of usage, and in latency. By observing the changes in the way that Internet has been used, this study also infers and presents information about people's behavior during COVID-19, e.g., if people complied with stay at home orders, engaged in online learning, and worked from home.

In the following sections of the paper we present related work about the impacts of COVID-19 in Internet usage (Section \ref{sec:related-work}), information about the data set (Section \ref{sec:datasets}) and the environment used to process and analyze the data (Section \ref{sec:methodology}) and then the results achieved by analyzing the data (Section \ref{sec:data-analysis}). Moreover, we also present the challenges that we faced while executing this project (Section \ref{sec:challenges}). Finally, we conclude and discuss future work in Section \ref{sec:conclusion}.

\section{Related Work}
\label{sec:related-work}

As of November 2020, a small number of Internet traffic studies looking at the effects of lockdowns have already been published. The studies generally look at traffic trends and patterns from a variety of vantage points and attempt to correlated those with peoples' behavior during government-imposed restrictions.

Feldmann et al. studied the effects of lockdowns on residential Internet traffic using data obtained from ISPs and Internet Exchange Points (IXP) in Europe and the US East Coast\cite{feldmann2020lockdown}. They found that residential traffic increased by 15-20\% after lockdowns and that remote work and education applications saw a 200\% increase in traffic. The regular weekday traffic pattern morphed into a weekend-like pattern with a significant traffic increase starting in the morning, from mid-March until roughly mid-May.

B\"{o}ttger et al. studied lockdown effects using data from Facebook's global edge network \cite{bottger2020internet}. The authors observed a significant traffic increase in the second half of March and found regional correlations between traffic growth and the spread of Covid-19 in the region. Traffic growth was more pronounced on broadband than on mobile networks. Using data from Facebook's video service, the authors found that globally the internet was able to keep up with the increased demand, with a degradation in quality of user experience in some regions such as India and South Africa. The degradation can be attributed to limited capacity and last-mile network congestion in those countries.

OpenVault saw a 40\% broadband traffic increase in the third quarter of 2020 over the third quarter of 2019, but less than 1\% over the second quarter of 2020 \cite{openvault}. This represents a considerable Covid-19 broadband traffic growth since 2019 which plateaued in 2020, indicating that a new normal for broadband bandwidth usage may have been established. The traffic growth of usage-based billing accounts outpaced flat rate billing accounts when broadband providers relaxed data usage quotas.

Ofcom reports that UK broadband service providers were generally able to keep up with the demand in March, with only a 1-2\% decrease in download and upload speeds and 2\% increase in latency \cite{uk-home-broadband-performance}.

SamKnows, the manufacturer of the Whitebox broadband monitoring device, published a series of articles about the state of the critical infrastructure on their blog \cite{samknows-cdn,samknows-video-streaming,samknows-video-conferencing,samknows-usa}. The observations by Whiteboxes installed in UK and the US and show only slightly worse average download speeds and round trip times.

Liu et al. found a 30-60\% increase in peak traffic volumes in the US, a statistically significant increase in average latency of 10\% for two months, and ISPs adding interconnect capacity at more than twice the usual rate \cite{liu2020characterizing}.

\nocite{lutu2020characterization}

%\nocite{partridge2003internet}

According to the study about Internet performance conducted by Kovacs, after the staying-home orders started in European countries and in the US, the American broadband network has performed well compared to the European one. The numbers show that traffic of data in the US grew up to 30\% in a month and that even with this increase, the average download speed in the US was \SI{138}{\mega\bit\per\second}. On the other hand, the EU showed a mean download speed of \SI{75}{\mega\bit\per\second}, showing that the average download speed in the US was 83\% higher than in the EU after the COVID-19 outbreak. Kovacs also argues that the US has had a better broadband network performance than the EU due to its diversified kinds of technology, which made the country not dependent on DSL. Only 18\% of the US broadband Internet uses DSL while in the EU this number is approximately 50\% \cite{kovacs}.

Moreover, the article \textit{Stealth CEO: Asymmetric broadband speeds cause strain during work from home efforts} \cite{robuck} points out that people who are currently working from home have faced some challenges to open all their work applications and have been using more cloud services. According to Robuck, Internet traffic caused by these cloud services increased 32\% since staying-home orders started in the country. Moreover, it has been confirmed that people have experienced an asymmetrical connection which has directly slowed the upstream speed.

In addition to that, according to the article \textit{COVID-19: How Cable's Internet Networks Are Performing} \cite{ncta}, since March 1st, the downstream peak in the US increased by 8.4\% while the upstream peak increased by 23.1\%. In addition to that, the conducted study showed that the upstream peak hours shifted from evenings to afternoons and that a more local analysis showed that in New York state these numbers increased by 9\% and 23.4\% respectively.

Finally, according to Frankel \cite{frankel}, the average down streams in urban spaces in March 16th was \SI{5.1}{\giga\byte} - more than double of the down streams value registered nine weeks before. In addition to that, Frankel affirms that according to Nilsen, video streaming consumption increased 61\% in the US since early March.

\section{Datasets}
\label{sec:datasets}

% TODO: Add subsection about privacy and ethical considerations, discussing how our analyses fit into these.

The Federal Communications Commission (FCC) runs the program Measuring Broadband America (MBA) which collects data about the broadband Internet usage and performance in the US \cite{mba}. The FCC has approximately 4,000 to 5,000 volunteers in program and each of them receives a Whitebox when signing up from the program. These devices are provided by SamKnows and are used to measure the performance and the overall volunteers' use of their broadband Internet connection \cite{sam}. The Whitebox performs active and passive measurements and generates data that is collected and reported by the FCC. All deployed Whiteboxes generate approximately \SI{20}{\giga\byte} of data per month. The FCC makes the collected data publicly available on their website \cite{data}.

Since 2011, the FCC has been publishing annual reports that summarize the state of the US broadband performance. The reports are based on the collected data and additional information collected and cross-validated from the selected broadband Internet Service Providers (ISPs) from four different regions of the country. This information included in the reports represents approximately 80\% of the total US population \cite{mba-studies}.

For this study, we mainly used the collected MBA (raw) data to analyze the changes in Internet usage caused by COVID-19. We worked with the data collected from January 2019 to June 2020, and by analyzing these data sets, we were aiming to understand not only how Internet usage has changed, but also how people's behavior using  Internet has changed after the stay-at-home orders took place throughout the US in early March. For the analysis generated about the population demographics, besides using the raw data, we also used integrated open-source 2019 US Census population data sets in order to obtain user county population data. For the analysis present in the other sessions, we used mainly the raw MBA data which contains different types of information related to Internet usage, such as values of data downloaded and uploaded, Internet speed, latency and packet loss.

It is important to notice that this study aligns with the ethical expectations of academic research, since it does not disclose private information. All data used in our analysis is public and can be openly accessed on FCC's website.

\section{Methodology}
\label{sec:methodology}

In order to analyze the impacts of COVID-19 on Internet usage, it was necessary to process and analyze data from January 2019 to March 2020. We analyzed approximately \SI{300}{\giga\byte} of data and considering how big the data sets were, it would be difficult to process them all and complete the project through a normal computer. Thus, after a careful consideration, we decided to use a virtual machine on Google Cloud to process all the data.

We used BigQuery on Google Cloud in order to upload each monthly data set from the FCC website and storage them. We also used the virtual machine to analyze the data sets through Datalab - an environment that gives access to Jupyter Notebooks - and we worked with Python in order to complete the analysis. Moreover, we used Git Repository to storage the Jupyter notebooks used.


\section{Data Analysis}
\label{sec:data-analysis}
\input{amey.tex}
\subsection{The Data Consumption}
\label{sec:the-data-consumption}
In this sub-section we present the results that show how COVID-19 changed the amount of average data downloaded and uploaded per user.

\subsubsection{Data Downloaded}
\label{sec:download-data-consumption}

In order to analyze the impact of COVID-19 on the amount of data downloaded, we calculated the average consumption per user and per month in the timeline of January-March 2020. After the averages were computed, Figure \ref{fig:download2020} was generated and it shows how the average amount of data downloaded per user has changed from January to March.

\begin{figure}
\centering
\includegraphics[width=1.0\linewidth]{figs/download2020.PNG}
\caption{Graph showing the average consumption of downloaded data per user for the first three months of 2020.}
\label{fig:download2020}
\end{figure}

As Figure \ref{fig:download2020} shows, in January the average amount of data downloaded per consumer was approximately \SI{145}{\giga\byte} and in March this value went up to approximately \SI{221}{\giga\byte}. This shows that from January to March there was an increase of approximately 53\% in the average per consumer. Figure \ref{fig:downloadup2019} shows the average of data downloaded and uploaded per user from January to March 2019. As the graph shows, in 2019 from January to March there was actually a decrease in the value of data downloaded (average for download is represented by the red line). Thus, one could conclude that the trend in data downloaded per user changed from 2019 to 2020, since instead of decreasing, the average per consumer increased considerably from January to March in 2020. Therefore, it is possible to conclude that this new trend in the quantity of data downloaded was established due to the COVID-19 outbreak as this was the strongest external factor that influenced Internet usage in the US in the first semester of 2020. In addition to that, as people stayed at home more in March, one possible explanation for this change in the value of downloaded data could be that they spent more time with online entertainment, e.g., video streaming services and games and also watching their classes from their computers, making their average amount of data downloaded to go up and showing that people tended to comply with stay at home orders.

\begin{figure}
\centering
\includegraphics[width=0.5\linewidth]{figs/downloadup2019.PNG}
\caption{Graph showing the average consumption of downloaded and uploaded data per user for the first three months of 2019.}
\label{fig:downloadup2019}
\end{figure}

\subsubsection{Uploaded Data}
\label{sec:upload-data-consumption}

Similarly to the average downloaded data analysis, while computing the average amount of data uploaded per consumer for the period of January-March of 2020, we could observe an increase in the average value from January to March. Figure \ref{fig:upload2020} is the graph for the average amount of data uploaded per consumer in the first three months of 2020 and shows that in January the average consumption per consumer (called in the graph as Unit-id) was approximately \SI{25}{\giga\byte} while in March it increased to approximately \SI{37}{\giga\byte}. These numbers show that there was an increase in the average value of data uploaded per consumer of approximately 38\%. Moreover, Figure \ref{fig:downloadup2019} also shows the average of uploaded data per consumer in 2019. According to the graph (average for upload is represented by the blue line), in 2019 there was a small increase in the average data uploaded per consumer from January to March. However, this increase was less than 2\% showing an increase not as relevant as the increase observed between the same months in 2020. Hence, it is possible to conclude that there was also a shift in the trend of the average data uploaded per consumer from January to March comparing 2019 and 2020. Moreover, as the increase in the average in 2020 was approximately 19 times bigger than the increase in 2019, it is clear that COVID-19 also impacted the average amount of data uploaded per user, considering that this was the external factor that impacted the consumption of Internet as a whole in 2020.

\begin{figure}
\centering
\includegraphics[width=1.0\linewidth]{figs/upload2020.PNG}
\caption{Graph showing the average consumption of uploaded data per user for the first three months of 2020.}
\label{fig:upload2020}
\end{figure}

Therefore, it can be concluded that the COVID-19 changed Internet usage in the US in the first quarter of 2020. The increase in the averages of data downloaded and uploaded per consumer from January to March in 2020 explicitly shows that there was an outside event that impacted the usage of Internet making it higher than it would be expected based on the trends of Internet consumption established from January to March of 2019. Since there was not any other major event influencing  Internet usage in March 2020, it is possible to conclude that this increase in the average amount of data downloaded and uploaded happened due to COVID-19, since people were using Internet more while they were complying to stay at home orders and quarantining.

\subsection{Average Speed}
\label{sec:average-speed}
Besides analyzing the average amount of data downloaded and uploaded per consumer in 2020, we also analyzed how the average speed experienced by consumers changed due to COVID-19. By knowing that the average value of data used per user increased significantly, it could be expected a change in the average speed that people experienced in the middle of quarantine, since ISPs could not be ready to adapt and supply the same average speed to all users, considering the expressive increase in data downloaded and uploaded.

\subsubsection{Average Download Speed}
\label{sec:average-download-speed}

In order to understand how the COVID-19 outbreak impacted the average download speed experienced by consumers, we calculated the ratio between the average download speed that users had access to in January and March 2020. The ratio was computed by the following formula:

\begin{equation}
ratio= ((av.speed.Mar - av.speed.Jan)/ av.speed.Jan)*100
\end{equation}

Figure \ref{fig:downloadspeed2020} shows the results of the compilation of the ratios in a CDF format and, according to this graph, it is possible to infer that approximately 70\% of the users experienced a decrease in their average download speed from January to March. This is not the finalized version of the graph yet, since considering how noisy and big the data set is, it is indeed tough to process all the data and find the final version of the graphs. However, Figure \ref{fig:downloadspeed2020} already shows reliable results if we compare them to what other studies related to the topic have shown as they show that indeed the average download speed decreased during March 2020. It is also important to note that while approximately 80\% of the users experienced a decrease in their download speed, this decrease was a modest value of few percentages. In the article \textit{ Internet Speed Analysis: Top 200 Cities, March 15th – 21st} \cite{cooper}, Cooper affirms that although some ISPs were able to hold up the increase in  Internet consumption, some cities felt the impact of the increase in data consumption leading users to experience a decrease in their download speed, e.g., the download speed in New York City decreased by 24\% in March. This decrease in the average download speed in some cities is a result of the decrease of average download speed that consumers have experienced from January to March in 2020 and vice-versa.

\begin{figure}
\centering
\includegraphics[width=1.0\linewidth]{figs/downspeed.PNG}
\caption{CDF that shows the ratios of average download speed experienced per consumer between January and March of 2020.}
\label{fig:downloadspeed2020}
\end{figure}

\subsubsection{Average Upload Speed}
\label{sec:average-upload-speed}
Similarly to the average download speed, we also computed the ratio between the average upload speed experienced by users in January and March 2020. The formula used was similar to the ratios for average download speed and can be represented by the following:
\begin{equation}
ratio= ((av.speed.Mar - av.speed.Jan)/ av.speed.Jan)*100
\end{equation}

Figure \ref{fig:uploadspeed2020} shows the compiled result of these ratios and, according to this graph, approximately 80\% of consumers (called unit-ids in the graph) saw their average upload speed decreasing from January to March 2020. As people transitioned most of their activities to a virtual environment, such as working and studying from home and had to log in calls and virtual conferences more often, it could be expected an increase in data upload (as Figure \ref{fig:upload2020} shows) and, consequently, a decrease in the average upload speed, since there were more data being uploaded than before. Again, similarly to the situation observed with the download speed, while 80\% of consumers experienced a decrease in their upload speed, this decrease was also modest of just a few percentages.

\begin{figure}
\centering
\includegraphics[width=1.0\linewidth]{figs/uploadspeed.PNG}
\caption{CDF that shows the ratios of average upload speed experienced per consumer between January and March of 2020.}
\label{fig:uploadspeed2020}
\end{figure}

\subsection{Consumers with the heaviest Internet consumption}
\label{sec:analyzing-the-users-with-the-highest-internet-usage}

One component analyzed in this research was how the users who extensively used Internet before the pandemic, have been using it after the COVID-19 outbreak. This analyzes hopes to gain more behavioral insights about people's Internet consumption. Thus, we identified the 10\% of users (approximately 500 users) who had the highest averages of data downloaded and uploaded and computed the ratio of average usage between January and March in order to find out if their usage increased or decreased after COVID-19 hit the country in early March.

\subsubsection{Heavy Download Users}
\label{sec:heavy-download-users}

In order to analyze the data usage of only heavy users, we computed the ratio of data downloaded between January and March for users who downloaded more than \SI{400}{\giga\byte} in January, in order words: we computed the ratios of data downloaded for approximately 10\% of the users who downloaded the most data in January. We applied the following formula to calculate the ratios:
\begin{equation}
ratio= data.downloaded.Mar/ data.downloaded.Jan
\end{equation}

After computing the ratios for the 10\% of users who downloaded the most data in January, we computed the CDF shown in Figure \ref{fig:heavydown}.

\begin{figure}
\centering
\includegraphics[width=1.0\linewidth]{figs/heavydown.PNG}
\caption{CDF that shows the ratios of average amount of data downloaded per consumer between January and March 2020 for consumers who downloaded more \SI{400}{\giga\byte} in January (top 10\% of consumers for data downloaded in January).}
\label{fig:heavydown}
\end{figure}

The graph shows that approximately 40\% of the users decreased or did not change their consumption of data downloaded. While this number was expected to be bigger, considering that before quarantine and stay at home orders took place these users were already using  Internet on its maximum capacity, a possible explanation to an increase in Internet consumption for this users is that possibly during quarantine, they spent even more time using video streaming service, e.g., Netflix and YouTube. According to Kovacs \cite{kovacs}, the world suffered from a more extensive Internet traffic in March which was primarily caused by video streaming services. Kovacs also explained in her paper \textit{U.S. broadband networks rise to the challenge of surging traffic during the pandemic} that 24\% of  Internet traffic in the US was caused by video services and that as a response, in March Netflix reduces its streaming speed and YouTube only allowed standard definition on its videos worldwide.

\subsubsection{Heavy Upload Users}
\label{sec:heavy-upload-users}

We also computed the ratios of data uploaded between January and March for 10\% of the users who uploaded the most data in January. This analysis included approximately 500 users who uploaded more than \SI{47}{\giga\byte} in January. The formula used to calculate the ratios was similar to the one used for heavy download users and can be represented by:

ratio=upload bytes used in March / upload bytes used in January

After computing the ratios for the 10\% of users who uploaded the most data in January, we generated the CDF shown in Figure 7. According to the graph, 60\% of users decreased or did not change their consumption for January to March. As this represents most of the heavy the users, a possible explanation for this decrease/no change in uploaded data by their consumers could be that when COVID-19 hit the country back in late February, people had to relocate, many left the big cities of the country and college campuses to return to their homes in the suburbs. By migrating, these people could possibly relocate in an area in which they could have had a bad Internet connection and or more options of outdoor activities, such as hiking. This who led them to not use  Internet as intensively as they were using before.

Moreover, another possible explanation for those who experienced no change in their download data consumption could be that as they were already consuming in their maximum capacity, when the stay at home orders took place, these people did not change their Internet consumption that much, since they were already consuming as much as they could before quarantining. It is also interesting to see that 40\% of the heavy upload users increased their consumption of uploaded data. Although this was not expected, a possible explanation for this increase is that with the quarantine and lock-down policies taking place, people started working from home and participating in more video conferences. By logging in Zoom meetings and other video conference services more frequently, their consumption of upload bytes increased significantly from January to March.
\begin{figure}
\centering
\includegraphics[width=1.0\linewidth]{figs/heavyup.PNG}
\caption{CDF that shows the ratios of average amount of data uploaded per consumer between January and March 2020 for consumers who uploaded more \SI{47}{\giga\byte} in January (top 10\% of consumers for data downloaded in January).}
\label{fig:heavyup}
\end{figure}

% Downloaded MB
\begin{figure*}[t]
  \centering
  \includegraphics[width=.49\textwidth]{figs/wenjun/download_wdays_before.png}
  \includegraphics[width=.49\textwidth]{figs/wenjun/download_wends_before.png}
  \includegraphics[width=.49\textwidth]{figs/wenjun/download_wdays_after.png}
  \includegraphics[width=0.49\textwidth]{figs/wenjun/download_wends_after.png}
  \includegraphics[width=.49\textwidth]{figs/wenjun/download_wdays_compare.png}
  \includegraphics[width=0.49\textwidth]{figs/wenjun/download_wends_compare.png}

  \vspace*{-1em}
  \caption{TODO: Download data.}
    \vspace*{-1em}
  \label{fig:download-data-per-user-hours-fig}
\end{figure*}

% wenjunchen
\subsection{Average Data Usage per Users over Hours on Each Month}
We study the average data usage per users over hours on each month by comparing the average data usage on weekdays or weekends, and before COVID-19 or after COVID-19 based on both download data and upload data. Since the recorded time in data set is finished in coordinated universal time, in order to get the time of download or upload event at local time, we add the time zone offset from the user profile to the recorded time.  We extract the year, month, and hour from the local time, and handle some special cases: (1) for hour, there is some location behind coordinated universal time and if the hour in local time is negative, add the value by 24. (2) For month, if the value of hour in local time is negative and the day is 1, we subtract the value of extracted month by 1 because it will be the last date of the previous month, and (3) for year, if the value of hour in local time is negative, the month is 1 and the day is 1, we subtract the value of extracted year by 1 since it will be the last date of the previous year. For the users, we focus on users who are present throughout the course of the study. We notice that the number of bytes that the customer transmitted from wired LAN devices to the internet for some users is the value of maximum integer. The possible reason is that the device measuring that value may be broken so we ignore all the users who have those values.

% % Downloaded MB
% \begin{figure*}[t]
%   \centering
%   \includegraphics[width=.49\textwidth]{figs/wenjun/download_wdays_before.png}
%   \includegraphics[width=.49\textwidth]{figs/wenjun/download_wends_before.png}
%   \includegraphics[width=.49\textwidth]{figs/wenjun/download_wdays_after.png}
%   \includegraphics[width=0.49\textwidth]{figs/wenjun/download_wends_after.png}
%   \includegraphics[width=.49\textwidth]{figs/wenjun/download_wdays_compare.png}
%   \includegraphics[width=0.49\textwidth]{figs/wenjun/download_wends_compare.png}

%   \vspace*{-1em}
%   \caption{TODO: Download data.}
%     \vspace*{-1em}
%   \label{fig:download-data-per-user-hours-fig}
% \end{figure*}

\subsubsection{Average Download Data per User}
\label{sec:download-data-per-user-over-hours}

The download data is the number of bytes that the customer received from the internet to wired LAN devices and the Wi-Fi devices. As shown in the Figure \ref{fig:download-data-per-user-hours-fig}, we can find that the patterns of download data usage are the same on weekdays and weekends whether before COVID-19 or after COVID-19. There is a peak between 18:00p.m. and 22:00p.m. \textbf{(TODO: why people always use more internet after dinner? Entertainment? Need more research)}

Moreover, according to the two graphs at the third row in Figure \ref{fig:download-data-per-user-hours-fig}, the average download data per user over hour after COVID-19 (red) is larger than that before COVID-19 (blue). On weekdays, the gaps between red lines and blue lines from 8:00 a.m. to 22:00 p.m. are more obvious that those from 22:00 p.m. to 8:00 a.m. next day. The increase from 8:00 a.m. to 18:00 p.m. may be because of work from home or online courses, and the increase from 18:00 p.m. to 22:00 p.m. may be because people can not hangout with their friends or have less outdoor activities because of social distancing and quarantine. Instead, people need to stay at home and may watch movie, play video games, and so on. Besides, people have poorer efficiency because of quarantine, and they may need more time to finish their work after dinner as well. \textbf{(TODO: need reference)} From 22:00 p.m. to 8:00 a.m. next day, it is time for rest so the average number of download data per user after COVID-19 does not have too much difference with that before COVID-19. On weekends, the difference between red lines and blue lines at daytime is not that obvious but the gap from 18:00 p.m. to 22:00 p.m. is still pretty larger, especially on May \textbf{(TO DO: why May?)}. People have a rest on weekends, so the usage of internet is less at daytime. After dinner, people need internet for their entertainment time. Therefore, we can conclude that people use more internet and download more data after COVID-19.

% Uploaded MB
\begin{figure*}[t]
  \centering
  \includegraphics[width=.49\textwidth]{figs/wenjun/upload_wdays_before.png}
  \includegraphics[width=.49\textwidth]{figs/wenjun/upload_wends_before.png}
  \includegraphics[width=.49\textwidth]{figs/wenjun/upload_wdays_after.png}
  \includegraphics[width=0.49\textwidth]{figs/wenjun/upload_wends_after.png}
  \includegraphics[width=.49\textwidth]{figs/wenjun/upload_wdays_compare_36.png}
  \includegraphics[width=0.49\textwidth]{figs/wenjun/upload_wends_compare_36.png}

  \vspace*{-1em}
  \caption{TODO: Upload Data.}
    \vspace*{-1em}
  \label{fig:upload_data_per_user_hours_fig}
\end{figure*}

\subsubsection{Average Upload Data per User}
\label{sec:upload-data-per-user-over-hours}

The upload data is the number of bytes that the customer transmitted from wired LAN devices and Wi-Fi devices to the internet. As shown in the Figure \ref{fig:upload_data_per_user_hours_fig}, compare with the pattern in average download data, the lines in the upload data graph is more fluctuating, especially the pattern for the upload data on weekends.

\textbf{TODO: need more analysis (not sure yet); updating the comparison graph}

\section{Challenges}
\label{sec:challenges}
Because we was working with a big data set, in total \SI{300}{\giga\byte} of data, one of the main challenges that we faced was to find an application that would be able to process all this data. By talking to my supervisors, we decided to use a virtual machine on Google Cloud because we thought it would be enough to treat and process all the data sets. However, even using Google Cloud, the virtual machine run out of memory and it was necessary find different ways to storage the data, such as transitioning to BigQuery. Moreover, even though this is a professional data set gathered by FCC, there was still some invalided and noisy data and some lack of data description, e.g., outdated information about Whiteboxes. These implications related to the data set also led to some additional challenges to analyze it.

\section{Conclusion}
\label{sec:conclusion}

Based on the graphs and information presented, it is possible to conclude that the COVID-19 outbreak has impacted the consume of Internet in the US. In terms of average consumption per user, from January 2020 to March 2020 (before and after COVID-19 hit the country) increased by 53\% for downloaded data and by 38\% for uploaded data. In addition to that, approximately 70\% of consumers experienced a decrease in their average download speed in March if compared to their average download speed in January, and approximately 80\% of users noticed a decrease in their average upload speed. These numbers show some of the impacts of COVID-19 in  Internet usage since this has been the most influential external factor to  Internet consumption in the US. Through these results that show that people indeed consumed more data in March, it can be inferred that people tended to comply to the stay at home orders and started doing most of their daily activities e.g., work and study, in a virtual environment.

\subsection{Future Work}
\label{sec:future-work}

As this project is a working in progress, some of the next steps would be continuing analyzing the changes in  Internet consumption, e.g., how consumption changed in business hours and changes related to different geographic regions in the US, and also analyzing changes in latency.

\section{Acknowledgements}
\label{sec:acknowledgements}

We would like to thank Barnard Computer Science department and the DIMACS REU program for making this summer research project possible to be accomplished and also the Craig Newmark Philanthropies for funding this research project.

\bibliographystyle{IEEEtran}
\bibliography{bibs/references}
\end{document}
